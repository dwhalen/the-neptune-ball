%%%%%
%%
%% This file sets up the Abil datatype and creates Abil macros.  These
%% are for abilities that characters may have.
%%
%%%%%

\DECLARESUBTYPE{Abil}{Element}
\PRESETS{Abil}{
  \F\MYtext	%% text of ability, read by user
  \F\MYeffect	%% effect text of ability, read by recipient(s)
  }


%%%%%
%% \ability{<name>}{<text>}{<effect>}
%%
%% \ability is a wrapper around \INSTANCE, useful for 1-shot abilities,
%% etc.
\newinstance{Abil}{\ability[3]}{
  \s\MYname{#1}\s\MYtext{#2}\s\MYeffect{#3}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NEW{Abil}{\aTest}{
  \s\MYname	{Test Ability}
  \s\MYtext	{You are a test.}
  \s\MYeffect	{This is a Test.}
  }

\NEW{Abil}{\aSpecial}{
  \s\MYname	{Special Powers}
  \s\MYtext	{You have special powers, as detailed in your \gTest{}
		greensheet.}
  \s\MYeffect	{I have special powers!}
  \s\MYgreens	{\gTest{}}
  \suite
  }

\NEW{Abil}{\aFiremansCarry}{
  \s\MYname	{Fireman's Carry}
  \s\MYtext	{You can carry a body as if it were two hands bulky.}
  \s\MYeffect	{I can carry this body well.}
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


  
%% Basic DarkWater-style Martial Attack abilities


%% Everyone has these 3
\NEW{Abil}{\aAssist}{
  \s\MYname	{Assist}
  \s\MYtext	{You can assist someone else's attack.  You must be
		within ZoC of both the attacker and target.  Within two
		seconds of an attack, direct this at the attacker,
		saying ``\MYname'' and your CR.}
  \s\MYeffect	{I assist your attack.}
  }

\NEW{Abil}{\aKnockOut}{
  \s\MYname	{Knock Out}
  \s\MYtext	{You can knock someone out as an attack.  This requires
		a {\bf blunt} weapon.  Say ``\MYname'' and your CR.}
  \s\MYeffect	{I knock you out.}
  }

\NEW{Abil}{\aWound}{
  \s\MYname	{Wound}
  \s\MYtext	{You can wound someone as an attack.  This requires an
		{\bf edged} weapon, such as a knife.  Say ``\MYname'' and
		your CR.}
  \s\MYeffect	{I wound you.}
  }


%% the \basecombat macro can be prepended to the Char abils list
%% (in char-LIST.tex)
\def\basecombat{\aKnockOut{}\aWound{}\aAssist{}}

%% only some people have these
\NEW{Abil}{\aDisarm}{
  \s\MYname	{Disarm}
  \s\MYtext	{You can disarm one item from someone as an attack.  Say
		``\MYname'' and your CR.  Point at the item you want to
		disarm.  If the attack works, they must drop that item.}
  \s\MYeffect	{I disarm that item.}
  }

\NEW{Abil}{\aRestrain}{
  \s\MYname	{Restrain}
  \s\MYtext	{You can restrain someone as an attack.  Say ``\MYname''
		and your CR.  You may freely drag, attack, or (if you have
		a weapon) killing-blow them.  To do anything else, or if
		your health state changes, incant ``release'' and let them
		go.}
  \s\MYeffect	{I restrain you.  You are restrained until I incant
		``release.''}
  }
\NEW{Abil}{\aThrow}{
  \s\MYname	{Throw}
  \s\MYtext	{You can throw someone as an attack.  Say ``\MYname'' and
		your CR.  Point in the direction you want to throw them.}
  \s\MYeffect	{I throw you.  Go in the direction I point ten full steps
		or until you hit a wall or similar.}
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%Magic
\NEW{Abil}{\aPerceive}{
  \s\MYname	{Sense Magic}
  \s\MYtext	{If you talk to someone for one minute, you may use this ability on them. }
  \s\MYeffect	{Tell me your $\alpha$ score and show me all items labeled ``magical effect''.}
  }

\NEW{Abil}{\aLesserDispel}{
  \s\MYname	{Lesser Dispel}
  \s\MYtext	{Can completely remove a magical effect of level-2 or lower. Can be used on magical locks to increase your ``working hand'' size by 1 for the duration of the session. Can disrupt shape shifters.}
  \s\MYeffect	{A faint light glows around you.}
  }

\NEW{Abil}{\aGreaterDispel}{
  \s\MYname	{Greater Dispel}
  \s\MYtext	{Can break spells up to level-4. Can be used on magical locks to increase your ``working hand'' size by 2 for the duration of the session. Can disrupt shape shifters.}
  \s\MYeffect	{A strong light glows around you.}
}

\NEW{Abil}{\aAbsoluteDispel}{
  \s\MYname	{Absolute Dispel}
  \s\MYtext	{This ability can be used to do any of the following things an unlimited number of times: Can be used to dispel \emph{any} magical effect in game. Can bypass any magical lock. Can disrupt shape shifters. Can give you a defensive CR of 10 for 30 seconds, usable in response to an attack. Can cure wounds and wake unconscious targets instantly. Once the stone has been used, it cannot be used again for the next 5 minutes.}
  \s\MYeffect	{A blinding light emanates from the stone.}
}

\NEW{Abil}{\aRevealed}{
  \s\MYname	{Psychlim: Shape shifting Disrupted}
  \s\MYtext	{If a dispel spell is cast on you (ask OOC if you aren't sure), the magic disrupts your shape shifting for a time. If a {\bf \aLesserDispel{}} is cast on you, you turn into a human for a split second. If a {\bf \aGreaterDispel{}} is cast on you, you turn into a human for 5 minutes (put on a green headband for the duration). If an {\bf \aAbsoluteDispel{}} is cast on you, you turn into a human for the rest of game (put on a green headband for the rest of game). In all cases, tell any observers what they see.}
  \s\MYeffect	{Ask me what you see.}
}

\NEW{Abil}{\aRampage}{
  \s\MYname	{Psychlim: Shape shifting Disrupted}
  \s\MYtext	{If a dispel spell is cast on you (ask OOC if you aren't sure), the magic disrupts your shape shifting for a time, turning you into a CR 5 shark for the duration. Put on a shark headband. You go into a blind rage and attack anyone you can see with knockout attacks. You have vague control of your choice of targets, but prioritize those with red headbands. The transformation takes about 5 seconds (tell any observers what they see), and lasts until you are rendered unconscious, you can no longer see any conscious players, or the only conscious players left in sight have resisted your attacks this rampage. At that time, turn back, and if you are not already unconscious, fall unconscious for 1 minute.}
  \s\MYeffect	{I turn into a shark.}
}

\NEW{Abil}{\aFirstAid}{
  \s\MYname	{First Aid}
  \s\MYtext	{Spend 1 minute roleplaying ministering to your patient. At the end of this minute, if they have not already died, show this card to them. They are no longer wounded or bloody.}
  \s\MYeffect	{You are no longer wounded or bloody. Take off you red headband immediately and wake up after 2 minutes.}
}

\NEW{Abil}{\aRunAway}{
  \s\MYname	{Run Away}
  \s\MYtext	{When you are affected by a CR-based attack, show this ability to your attacker. You become immune to CR-based attacks for 15 seconds, during which you must flee the dangerous situation, attempting to find your mother as soon as possible. This ability only refreshes when you spend one minute receiving comfort from your mother or another family member (roleplay accordingly).}
  \s\MYeffect	{Your ability has no effect.}
}

\NEW{Abil}{\aUnnoticed}{
  \s\MYname	{Unnoticed}
  \s\MYtext	{When you use this ability, you are effectively invisible for 2 minutes. Set your egg timer for 2 minutes and go 'Not Here.' At the end of the 2 minutes, when the timer goes off, announce to anyone nearby 'You see me,' and come back from 'Not Here.' You can activate this ability when no one can see you.}
  \s\MYeffect	{You don't see me.}
}

\NEW{Abil}{\aTeleport}{
  \s\MYname	{Teleport}
  \s\MYtext	{When you use this ability, you go 'Not Here' and immediately move directly to any other location in game. You do not see or hear anything during this movement, and when you arrive, return from 'Not Here.' You may use this ability from anywhere in game and even while restrained, though not if you are unconscioius. This is a single use ability.}
  \s\MYeffect	{I vanish.}
}

\NEW{Abil}{\aRemoveDisguise}{
  \s\MYname	{Remove Disguise}
  \s\MYtext	{When you use this ability, put on a purple headband. You reveal your true self, \cQueen{\King} \cQueen{}. Open your ``\mREnvelope{}''.}
  \s\MYeffect	{I tear off my mask, alter my posture, and suddenly look totally different.}
  \s\MYmems {\mREnvelope{}}
}

\NEW{Abil}{\aMonsterTransformation}{
  \s\MYname	{Monster Transformation}
  \s\MYtext	{When you use this ability, call a game halt and find a GM. You resist any darkwater attack currently being leveled at you, break any restrains, and turn into a 10 foot tall terror of the deep. See the associated greensheet.}
  \s\MYeffect	{I become invulnerable, break any restrains, and turn into a giant monster. Rawr!}
  \s\MYgreens {\gMonsterTransformation{}}
}

\NEW{Abil}{\aDrawBlood}{
  \s\MYname	{Siphon Soul}
  \s\MYtext	{You draw a mote of the target's soul to pay the cost of a spell or potion. One draw is enough to pay for any spell or potion you can make in game, but feel free to charge more for more difficult or dangerous ones. {\bf This ability cannot be used on targets that are already bloody (wearing a red headband)}}
  \s\MYeffect	{I draw a piece of your soul out through a cut in your arm. Put on a red headband for 10 minutes and suffer -1 CR for as long as you wear the red headband.}
}

\NEW{Abil}{\aXStep}{
  \s\MYname	{Cross Step Waltz}
  \s\MYtext	{You know how to Cross Step Waltz. If you would like to teach this to someone else, show them this card, then spend 5 minutes roleplaying teaching them (feel free to actually teach them if you know how).}
  \s\MYeffect	{I teach you the basics of Cross Step Waltz. Learn enough to fake it out of game, then go to the <ballroom> to get a copy of this ability.}}


\NEW{Abil}{\aMerengue}{
  \s\MYname	{Merengue}
  \s\MYtext	{You know how to Merengue. If you would like to teach this to someone else, show them this card, then spend 5 minutes roleplaying teaching them (feel free to actually teach them if you know how).}
  \s\MYeffect	{I teach you the basics of Merengue. Learn enough to fake it out of game, then go to the <ballroom> to get a copy of this ability.}  
}

\NEW{Abil}{\aSwing}{
  \s\MYname	{Swing}
  \s\MYtext	{You know how to Swing. If you would like to teach this to someone else, show them this card, then spend 5 minutes roleplaying teaching them (feel free to actually teach them if you know how).}
  \s\MYeffect	{I teach you the basics of Swing. Learn enough to fake it out of game, then go to the <ballroom> to get a copy of this ability.}
}

\NEW{Abil}{\aInspiration}{
  \s\MYname	{Inspiration}
  \s\MYtext	{Use only when solving a puzzle or trivia question. For a puzzle, you may look at the answer and ignore any penalty for not having solved it. For a trivia question, go find a GM and ask them the answer to the question. You may use this ability twice in game, but the uses must be at least 5 minutes apart. If in doubt as to whether a question qualifies, ask a GM.}
  \s\MYeffect	{I know, I know!}
}

\NEW{Abil}{\aNo}{
  \s\MYname	{No.}
  \s\MYtext	{This ability is the culmination of your will that you have built up over several years. You may refuse any one command that \cWitch{} gives you and become immune to \cWitch{\their} commands for 30 seconds by showing \cWitch{\them} this ability. This allows you to ignore the effects of the \iEnslavementSpell{}, {\bf but not} the \iIdentityProtectionSpell{}. This ability is single use.}
  \s\MYeffect	{I refuse.}
}

\NEW{Abil}{\aShark}{
  \s\MYname	{Collateral Damage}
  \s\MYtext	{Use only on a target \emph{without} a red headband that you just knocked out. They are knocked out for 2 minutes instead of 5.}
  \s\MYeffect	{I knock you out for 2 minutes instead of 5.}
}

\NEW{Abil}{\aReligiousRites}{
  \s\MYname	{Religious Rites}
  \s\MYtext	{You know how to perform different priestly rites, including, but not limited to, performing blessings, last rites, and weddings. Roleplay as you see fit given the gravity of the rite you perform. This may include requiring a certain number of participants and should definitely include a preacher voice as you wax poetic about the Moon and/or the Tides.).}
  \s\MYeffect	{I perform a religious ceremony.}
}
