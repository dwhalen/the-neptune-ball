%%%%%
%%
%% This file sets up the Abil datatype and creates Abil macros.  These
%% are for abilities that characters may have.
%%
%%%%%

\DECLARESUBTYPE{Abil}{Element}
\PRESETS{Abil}{
  \F\MYtext	%% text of ability, read by user
  \F\MYeffect	%% effect text of ability, read by recipient(s)
  }


%%%%%
%% \ability{<name>}{<text>}{<effect>}
%%
%% \ability is a wrapper around \INSTANCE, useful for 1-shot abilities,
%% etc.
\newinstance{Abil}{\ability[3]}{
  \s\MYname{#1}\s\MYtext{#2}\s\MYeffect{#3}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NEW{Abil}{\aTest}{
  \s\MYname	{Test Ability}
  \s\MYtext	{You are a test.}
  \s\MYeffect	{This is a Test.}
  }

\NEW{Abil}{\aSpecial}{
  \s\MYname	{Special Powers}
  \s\MYtext	{You have special powers, as detailed in your \gTest{}
		greensheet.}
  \s\MYeffect	{I have special powers!}
  \s\MYgreens	{\gTest{}}
  \suite
  }

\NEW{Abil}{\aFiremansCarry}{
  \s\MYname	{Fireman's Carry}
  \s\MYtext	{You can carry a body as if it were two hands bulky.}
  \s\MYeffect	{I can carry this body well.}
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


  
%% Basic DarkWater-style Martial Attack abilities


%% Everyone has these 3
\NEW{Abil}{\aAssist}{
  \s\MYname	{Assist}
  \s\MYtext	{You can assist someone else's attack.  You must be
		within ZoC of both the attacker and target.  Within two
		seconds of an attack, direct this at the attacker,
		saying ``\MYname'' and your CR.}
  \s\MYeffect	{I assist your attack.}
  }

\NEW{Abil}{\aKnockOut}{
  \s\MYname	{Knock Out}
  \s\MYtext	{You can knock someone out as an attack.  This requires
		a {\bf blunt} weapon.  Say ``\MYname'' and your CR.}
  \s\MYeffect	{I knock you out.}
  }

\NEW{Abil}{\aWound}{
  \s\MYname	{Wound}
  \s\MYtext	{You can wound someone as an attack.  This requires an
		{\bf edged} weapon, such as a knife.  Say ``\MYname'' and
		your CR.}
  \s\MYeffect	{I wound you.}
  }


%% the \basecombat macro can be prepended to the Char abils list
%% (in char-LIST.tex)
\def\basecombat{\aKnockOut{}\aWound{}\aAssist{}}

%% only some people have these
\NEW{Abil}{\aDisarm}{
  \s\MYname	{Disarm}
  \s\MYtext	{You can disarm one item from someone as an attack.  Say
		``\MYname'' and your CR.  Point at the item you want to
		disarm.  If the attack works, they must drop that item.}
  \s\MYeffect	{I disarm that item.}
  }

\NEW{Abil}{\aRestrain}{
  \s\MYname	{Restrain}
  \s\MYtext	{You can restrain someone as an attack.  Say ``\MYname''
		and your CR.  You may freely drag, attack, or (if you have
		a weapon) killing-blow them.  To do anything else, or if
		your health state changes, incant ``release'' and let them
		go.}
  \s\MYeffect	{I restrain you.  You are restrained until I incant
		``release.''}
  }
\NEW{Abil}{\aThrow}{
  \s\MYname	{Throw}
  \s\MYtext	{You can throw someone as an attack.  Say ``\MYname'' and
		your CR.  Point in the direction you want to throw them.}
  \s\MYeffect	{I throw you.  Go in the direction I point ten full steps
		or until you hit a wall or similar.}
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NEW{Abil}{\aPerceive}{
  \s\MYname	{Sense Magic}
  \s\MYtext	{If you talk to someone for one minute, you may use this ability on them. }
  \s\MYeffect	{Tell me your $\alpha$ score and show me all items labeled ``magical effect''.} % TODO: add alpha score to magicians.
  }

\NEW{Abil}{\aLesserDispel}{
  \s\MYname	{Lesser Dispel}
  \s\MYtext	{Can completely remove a magical effect of level-2 or lower. Can be used on magical locks to reduce the necessary decking hand by one (decking hand requirement cannot be reduced below 1). Can disrupt shape shifters.}
  \s\MYeffect	{A faint light glows around you.}
  }

\NEW{Abil}{\aGreaterDispel}{
  \s\MYname	{Greater Dispel}
  \s\MYtext	{Can break spells up to level-4. Can be used on magical locks to reduce the necessary decking hand by two (decking hand requirement cannot be reduced below 1). Can disrupt shape shifters.}
  \s\MYeffect	{A strong light glows around you.}
}

\NEW{Abil}{\aAbsoluteDispel}{
  \s\MYname	{Absolute Dispel}
  \s\MYtext	{This stone can be used to do any of the following things an unlimited number of times: Can be used to dispel \emph{any} magical effect in game. Can bypass any magical lock. Can disrupt shape shifters. Can give you a defensive CR of 10 for 30 seconds. Can cure wounds (the target wakes up instantly). Once the stone has been used, it cannot be used again for the next 5 minutes.}
  \s\MYeffect	{A blinding light emanates from the stone.}
}

\NEW{Abil}{\aRevealed}{
  \s\MYname	{Psychlim: Shape shifting Disrupted}
  \s\MYtext	{If a dispel spell is cast on you (ask ooc if you aren't sure), the magic disrupts your shape shifting for a time. If a {\bf \aLesserDispel{}} is cast on you, you turn into a human for a split second. If a {\bf \aGreaterDispel{}} is cast on you, you turn into a human for 5 minutes (put on a purple headband for the duration). If an {\bf \aAbsoluteDispel{}} is cast on you, you turn into a human for the rest of game (put on a purple headband for the rest of game). In all cases, tell any observers what they see.}
  \s\MYeffect	{Ask me what you see.} % TODO: add alpha score to magicians.
}

\NEW{Abil}{\aFirstAid}{
  \s\MYname	{First Aid}
  \s\MYtext	{If a dispel spell is cast on you (ask ooc if you aren't sure), the magic disrupts your shape shifting for a time. If a {\bf \aLesserDispel{}} is cast on you, you turn into a human for a split second. If a {\bf \aGreaterDispel{}} is cast on you, you turn into a human for 5 minutes (put on a purple headband for the duration). If an {\bf \aAbsoluteDispel{}} is cast on you, you turn into a human for the rest of game (put on a purple headband for the rest of game). In all cases, tell any observers what they see.}
  \s\MYeffect	{Ask me what you see.} % TODO: add alpha score to magicians.
}