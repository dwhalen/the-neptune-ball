 %%%%
%%
%% This file sets up the Sign and Label datatypes and creates Sign and
%% Label macros.
%%
%% Signs generally represent interesting parts of game area, usually
%% as things posted on walls.  Labels represent other things, often on
%% or inside envelopes, that are part of complex mechanics.
%%
%% The default value for \MYloc will inherit location from the Place
%% or Sign most immediately up the ownership tree.  Override this by
%% setting \MYloc to anything (even blank).
%%
%% Sign is for full-sized signs that would cover most of a large
%% manila envelope; SignMedium is for signs sized to half-sized manila
%% envelopes; SignSmall is for signs sized for small manila envelopes
%% (the same size as item cards).  Label, LabelMedium, and LabelSmall
%% are analagous, but they don't have a \takedownby note at the
%% bottom.  You can always use a sign or label without an envelope or
%% with a differently-sized envelope.  Choose which based on
%% visibility and content.
%%
%% SignTiny is for signs you want to be hard to find; it is small and
%% does not have a \takedownby note.  SignDot is for a very small
%% "dot" which only has a title.
%%
%% SignStrip produces a strip of paper (without a \takedownby note)
%% with labels on the outside that show on both sides if you fold it
%% in half.  These are a convenient alternative to sub-envelopes. They
%% can also be used for "s-packets" taped to walls (see
%% Extras/README-s-packets).
%%
%% LabelCover produces a label similar to the cover to a research
%% notebook.  LabelPage, likewise, produces a page.
%%
%% EOG is for full-sized end-of-game signs.
%%
%%%%%

\DECLARESUBTYPE{Sign}{Element}
\PRESETS{Sign}{
  \FD\MYloc	{\mylocation} %% real-space location
  \FD\MYtext	{} %% text of sign
  }
\POSTSETS{Sign}{
  \edef\mylocation{\MYloc}
  \protected@edef\@ownerstring{%
    \MYname%
    \ifx\mylocation\empty\else\ (\mylocation)\fi%
    }
  }
\def\mylocation{}

\def\loc#1{\rs\MYloc{#1}}

\DECLARESUBTYPE{SignMedium}{Sign}
\DECLARESUBTYPE{SignSmall}{Sign}
\DECLARESUBTYPE{SignTiny}{Sign}
\DECLARESUBTYPE{SignDot}{Sign}
\PRESETS{SignDot}{\s\MYtext{}}

\DECLARESUBTYPE{Label}{Sign}
\PRESETS{Label}{\s\MYloc{}}
\DECLARESUBTYPE{LabelMedium}{Label}
\DECLARESUBTYPE{LabelSmall}{Label}

\DECLARESUBTYPE{SignStrip}{Sign}
\DECLARESUBTYPE{LabelCover}{Label}
\DECLARESUBTYPE{LabelPage}{Label}

\DECLARESUBTYPE{EOG}{Sign}
\PRESETS{EOG}{%
  \s\MYname	{End Of Game}
  \s\MYtext	{{\bf\Huge You may not pass through here.}}
  }


%%%%%
%% \signbig[<location>]{<name>}{<text>}
%% \eog[<location>]
%%
%% \signmdeium[<location>]{<name>}{<text>}
%% \signsmall[<location>]{<name>}{<text>}
%% \signtiny[<location>]{<name>}{<text>}
%% \signdot[<location>]{<name>}
%%
%% \labelbig{<name>}{<text>}
%% \labelmedium{<name>}{<text>}
%% \labelsmall{<name>}{<text>}
%%
%% \signstrip[<location>]{<name>}{<text>}
%% \labelcover{<name>}{<text>}
%% \labelpage{<name>}{<text>}
\newinstance{Sign}{\signbig[3][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}\s\MYtext{#3}}
\newinstance{EOG}{\eog[1][\mylocation]}{\s\MYloc{#1}}

\newinstance{SignMedium}{\signmedium[3][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}\s\MYtext{#3}}
\newinstance{SignSmall}{\signsmall[3][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}\s\MYtext{#3}}
\newinstance{SignTiny}{\signtiny[3][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}\s\MYtext{#3}}
\newinstance{SignDot}{\signdot[2][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}}

\newinstance{Label}{\labelbig[2]}{
  \s\MYname{#1}\s\MYtext{#2}}
\newinstance{LabelMedium}{\labelmedium[2]}{
  \s\MYname{#1}\s\MYtext{#2}}
\newinstance{LabelSmall}{\labelsmall[2]}{
  \s\MYname{#1}\s\MYtext{#2}}

\newinstance{SignStrip}{\signstrip[3][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}\s\MYtext{#3}}
\newinstance{LabelCover}{\labelcover[2]}{
  \s\MYname{#1}\s\MYtext{#2}}
\newinstance{LabelPage}{\labelpage[2]}{
  \s\MYname{#1}\s\MYtext{#2}}


%%%%%
%% \sEOG{}
%% use \sEOg[\loc{<location>}]{} for EOG sign at a specific place
\NEW{EOG}{\sEOG}{
  }


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NEW{Sign}{\sTest}{
  \s\MYname	{A Room}
  \s\MYloc	{10-250}
  \s\MYtext	{A lecture hall with large, sliding blackboards.}
  }


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% The hotel rooms
\NEW{Sign}{\sHotelRooms}{
  \s\MYname	{Hotel Room Access}
  \s\MYloc	{- 004}
  \s\MYtext	{There are three ways to gain entrance to a hotel room:

{\bf 1. } Possess the appropriate room key.

{\bf 2. } You may hit the door with a {\bf CR of 5} or greater.

{\bf 3. } Hack your way in. The lock has a difficulty level of {\bf 1} unless the room belongs to \cScientist{\MYname{}}, in which case the lock has a difficulty level of {\bf 2}.

Once you have completed one of the above requirements, you may stand with your hand on the room sign for 30 seconds to enter the room. You may then freely stash items that are stashable, and take items that are in the room.}
}
 
%Library
\NEW{Sign}{\sMuseum}{
  \s\MYname	{The Royal Museum}
  \s\MYloc	{- 002}
  \s\MYtext	{This area houses the royal treasury and the royal archives. It is a large, open space with vaulted ceilings and many priceless artifacts scattered among the ancient texts.}
  \s\MYitems {}
} 

%Dungeon
\NEW{Sign}{\sDungeons}{
  \s\MYname	{The Dungeons}
  \s\MYloc	{Hallway off - 002}
  \s\MYtext	{These are the royal dungeons. Party-goers probably shouldn't be in here.}
  \s\MYitems {}
}

\NEW{Sign}{\sBarnacles}{
  \s\MYname	{Barnacles}
  \s\MYloc	{Hallway off - 002}
  \s\MYtext	{There is a growth of barnacles on the wall here. The servants have neglected to clear it off. {\bf You may spend 30 seconds scraping one off of the wall. If you do, take one item from the envelope below.}}
  \s\MYitems {\multi{5}{\iBarnacle{}}}
} 

%Banquet hall
\NEW{Sign}{\sBanquetHall}{
  \s\MYname	{The Banquet Hall}
  \s\MYloc	{-013}
  \s\MYtext	{This is the royal banquet hall. No expense was spared in decorating this room with rare shells from across \pAtlantis{}. The banquet will take place here at \cTTwo{}.}
  \s\MYitems {}
}

%Explorer's guild
\NEW{Sign}{\sExplorersDoor}{
  \s\MYname	{The Explorer's Guild}
  \s\MYloc	{Hallway near -015}
  \s\MYtext	{This is an office of the Explorer's Guild in the palace. If you are an Explorer's Guild member, the door recognizes you and lets you pass freely (You may look at the sign under this one immediately.) 
  
  If you are not an Explorer's Guild member and would like to break in, you may try to beat the lock by decking a hand of 4. (This is a magical lock).}
  \s\MYitems {}
}

\NEW{Sign}{\sExplorersInventory}{
  \s\MYname	{The Explorer's Guild Inventory}
  \s\MYloc	{Hallway near -015}
  \s\MYtext	{This is the inventory of the Explorer's Guild office. You may take any {\bf 1} of the following items by searching through the inventory for a period of time, then crossing it off the list below. If you are an Explorer's Guild member, this action takes 1 minute as the magic of the room aids you. Otherwise, it takes 2 minutes. You may as many items as you like, after fulfilling the time requirement for it.
  \begin{multicols}{2}
  \begin{enumerate}
	\item \iAnglerFish{}
	\item \iAnglerFish{}
	\item \iAnglerFish{}
	\item \iAnglerFish{}
	\item \iAnglerFish{}
	\item \iAnglerFish{}
	\item \iManOfWar{}  (Dangerous)
	\item \iManOfWar{}  (Dangerous)
	\item \iManOfWar{}  (Dangerous)
	\item \iManOfWar{}  (Dangerous)
	\item \iDeepClam{}
	\item \iDeepClam{}
	\item \iElectricEel{}
	\item \iElectricEel{}
	  \item \iIceFish{}
  \item \iIceFish{}
	\item \iSquid{}
	\item \iSquid{}
	\item \iSquid{}
	\item \iSquid{}
  \end{enumerate}
  \end{multicols}
  If you take one of these items, cross it off of the list above. It is immediate apparent to anyone in this room what has been taken.
  }
  \s\MYitems {\iIceFish{} \iIceFish{} \multi{4}{\iSquid{}} \multi{6}{\iAnglerFish{}} \iElectricEel{} \iElectricEel{} \iDeepClam{} \iDeepClam{} \multi{4}{\iManOfWar{}}}
}

%caves
\NEW{Sign}{\sCaves}{
  \s\MYname	{The Caves}
  \s\MYloc	{-015}
  \s\MYtext	{This is a set of caves that are on the palace grounds but not part of the palace themselves. Party-goers should have no business here.}
  \s\MYitems {}
}

\NEW{Sign}{\sUrchins}{
  \s\MYname	{The Caves}
  \s\MYloc	{-015}
  \s\MYtext	{This is a set of caves that are on the palace grounds but not part of the palace themselves. Party-goers should have no business here.}
  \s\MYitems {}
}

\NEW{Sign}{\sSnails}{
  \s\MYname	{The Caves}
  \s\MYloc	{-015}
  \s\MYtext	{This is a set of caves that are on the palace grounds but not part of the palace themselves. Party-goers should have no business here.}
  \s\MYitems {}
}

\NEW{Sign}{\sPearl}{
  \s\MYname	{A bed of clams}
  \s\MYloc	{-015}
  \s\MYtext	{There are a bed of clams here. {\bf You may spend 1 minute to  break open one of the clams.} To do so, take one of the clams from the envelope below and open it after 1 minute has passed.}
  \s\MYitems {\multi{9}{\iClam{}} \iPearlClam{}}
}